# Requirements: GTD Home Redesign

*Generated from conversation on 2025-12-13*

## Objective

Redesign the HarmonyTech GTD app's home/inbox experience so users can instantly see what needs attention (unprocessed items) and what to do next (AI recommendations) when opening the app - following true GTD methodology.

## Core Requirements

### Must Have (High Priority)

- [HIGH] **True Inbox View** - Show unprocessed thoughts (`aiProcessed: false`) that need user review/decision
- [HIGH] **Home Dashboard** - Primary landing page with inbox alert banner + top AI recommendation
- [HIGH] **AI Auto-classification** - Background AI processes thoughts, extracts tasks, removes from inbox automatically
- [HIGH] **Inbox Badge** - Navigation shows count of unprocessed items (e.g., "Inbox (3)")
- [HIGH] **Quick Review UI** - Approve/Edit/Dismiss actions for inbox items

### Should Have (Medium Priority)

- [MEDIUM] **Confidence-based Flow** - High confidence AI extractions auto-exit inbox; low confidence stays for review
- [MEDIUM] **Processing Status Indicator** - Show "3 thoughts processing..." when AI is working
- [MEDIUM] **Review Page** - Combined view of all tasks and thoughts for weekly review
- [MEDIUM] **Rename Navigation** - Current "Inbox" becomes "Home", new "Inbox" for unprocessed items

### Could Have (Low Priority / Inferred)

- [LOW] **Smart Batching** - Group similar thoughts for batch processing
- [LOW] **Context Detection** - Auto-detect location/time for better recommendations
- [LOW] **Processing History** - Show what AI extracted from each thought

## Technical Constraints

- **Framework/Stack:** React 18, TypeScript, Vite, RxDB, Zustand
- **Existing Infrastructure:** Background AI hook (`useBackgroundAI`), Pino logging, AI providers (OpenRouter, Yandex)
- **Database Schema:** Thought (`aiProcessed: boolean`), Task (`context`, `energy`, `timeEstimate`, `project`)
- **Performance:** Home screen load < 2 seconds, AI processing < 30 seconds background

## Data Model Changes

### Thought Schema Enhancement (Recommended)
```typescript
interface Thought {
  // existing fields...
  processingStatus: 'unprocessed' | 'processing' | 'processed' | 'failed'
  tasksExtracted: boolean
  lastProcessedAt?: string
  processingError?: string
}
```

### Task Schema Enhancement (Recommended)
```typescript
interface Task {
  // existing fields...
  classificationStatus: 'pending' | 'classified' | 'user_override'
}
```

## User Context

**Target Users:** Personal productivity users following GTD methodology
**Primary Use Case:** Open app, quickly see what needs attention, decide what to do next
**User Flow:**
1. Open app → See Home dashboard
2. If inbox has items → Review/process them (or let AI handle)
3. Check "What To Do Next" recommendation
4. Start task or browse full task list

## Workflow States

```
Capture → Thought (unprocessed) → [INBOX]
                    ↓
              AI Processing
                    ↓
            ┌───────┴───────┐
            ↓               ↓
      High confidence   Low confidence
            ↓               ↓
      Auto-exit inbox   Stay for review
            ↓               ↓
         [TASKS]         [INBOX]
            ↓
    [HOME: Recommendations]
```

## Edge Cases & Considerations

- **AI Processing Fails** - Keep in inbox with "failed" status, show retry option
- **AI Extracts 0 Tasks** - Auto-mark as processed (becomes reference note)
- **Low Confidence Extraction** - Flag for user review before exiting inbox
- **User Disables AI** - Manual-only processing mode needed
- **Orphaned Tasks** - Handle thought deletion with linked tasks

## Implicit Requirements

*Inferred from conversation context - please verify:*
- [UX] Single primary recommendation shown expanded, others collapsed
- [UX] Inbox alert banner appears only when items exist
- [UX] Context refine bar for filtering recommendations (energy/time/location)
- [Analytics] Track Time to Action, Inbox Zero Rate, AI accuracy

## Success Criteria

How we know this is complete and working:
- ✓ User sees inbox count immediately on app open
- ✓ Unprocessed thoughts appear in Inbox view (not recommendations)
- ✓ AI-processed items automatically leave inbox
- ✓ Home shows top recommendation with "Why this task?" reasoning
- ✓ Time to first action < 10 seconds
- ✓ 70% of users can achieve Inbox Zero daily

## Navigation Structure (Proposed)

```
Sidebar
├─ Home (What To Do Next + Inbox Alert)  ← Default landing
├─ Inbox (Unprocessed items)             ← NEW: True GTD inbox
├─ Tasks (All tasks with filters)
├─ Thoughts (Capture history)
└─ Settings
```

## Next Steps

1. Review this PRD for accuracy and completeness
2. If anything is missing or unclear, continue the conversation
3. When ready, use `/clavix:plan` to generate implementation tasks

---
*This PRD was generated by Clavix from conversational requirements gathering.*
